#include "../include/game.hpp"

Game::Game() : 
    Player1(Point2d(0, 0), Point2d(0, 0), Point2d(0, ACCELERATION)),
    isStarted(0),
    gameTime(0.0f)
{

    this->floors[0] = Line2d( Point2d(0,0), Point2d(MAX_X, 0) );

    for(int i = 1; i < N_FLOORS; i++){
    	Line2d::RandomLine(200, 600, MIN_X, MAX_Y, FLOOR_SPACING * j + FLOOR_HEIGHT);
    }
}

void Game::Display(){

}


void Game::Run(){
     
    Player1.calculateNextPosition(0.1);

    if(Player1.getPosition().GetX() < 0) {
        Player1.setPosition(Point2d( 0, Player1.getPosition().GetY() ));
        Player1.setVelocity( Player1.getVelocity() * Point2d(-0.5f, 1.0f) );
    }
    if(Player1.getPosition().GetX() > MAX_X){
        Player1.setPosition(Point2d( MAX_X, Player1.getPosition().GetY() ));
        Player1.setVelocity( Player1.getVelocity() * Point2d(-0.5f, 1.0f) );
    }

    if(Player1.getPosition().GetY() < 0){
         Player1.setPosition(Point2d( Player1.getPosition().GetX(), 0 ));
         Player1.setVelocity( Player1.getVelocity() * Point2d(1.0f,0.0f) );
    }
    if(Player1.getPosition().GetY() > MAX_Y) Player1.setPosition(Point2d( Player1.getPosition().GetX(), MAX_Y ));
}
