#include "xstatus.h"
#include "../include/game.hpp"

#include "../include/fpga_interface.h"
#include "xil_printf.h"

u16 rgb565torgb444(u16 rgb565){
	return ( ((rgb565 & 0x1e) >> 1) | ((rgb565 & 0x780) >> 3)  | ((rgb565 & 0xf000) >> 4) );
}

Game GameInstance;

int main(){

    xil_printf("dupxo\r\n");

	initialize_hardware();
	initialize_interface(&GameInstance);

    while(1){

    	int i = 0;
		while(i++ < 100000);
    	GameInstance.Run();

    	if(GameInstance.gameOver){
    		GameInstance = Game();
    	}

    	interface_update();
    }
}

